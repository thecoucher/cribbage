(this.webpackJsonpcribbage_tester=this.webpackJsonpcribbage_tester||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/card_back.799786dd.jpg"},26:function(e,t,a){e.exports=a(43)},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(16),s=a.n(c),o=a(7),i=a(23),l=a(24),u=a(6),d="TOGGLE_SHOW_RESULTS",h="TOGGLE_SHOW_CUSTOM_HAND",m="GET_NEW_CARDS",p="GET_NEW_DECK",v="SORT_HAND",g="CHANGE_HAND",f="SHOW_ERROR",E={showResults:!1,showCustomHand:!1,showError:!1,error:"",hand:[],cardsLeft:0};var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(u.a)({},e,{showResults:!e.showResults});case h:return Object(u.a)({},e,{showCustomHand:!e.showCustomHand});case p:return Object(u.a)({},e,{deck_id:t.data.deck_id,cardsLeft:t.data.cardsLeft,showResults:t.data.showResults,showError:!1,error:""});case m:return Object(u.a)({},e,{hand:t.data.hand,cardsLeft:t.data.cardsLeft,showResults:t.data.showResults,showError:!1,error:""});case v:return Object(u.a)({},e,{hand:t.data.sortedHand});case g:return Object(u.a)({},e,{hand:t.data.newHand});case f:return Object(u.a)({},e,{showError:!0,error:t.data.error});default:return e}},k=Object(o.c)({deck:b}),w=Object(i.createLogger)({collapsed:!0}),N=Object(o.d)(k,Object(o.a)(l.a,w)),O=a(3),C=a(9),H=a(10),y=a(12),j=a(11),S=a(13);function R(e,t,a){return{type:p,data:{deck_id:e,cardsLeft:t,showResults:a}}}function _(e,t,a){return{type:m,data:{hand:e,cardsLeft:t,showResults:a}}}function A(e){return{type:f,data:{error:e}}}var x=a(1),L=a(5),T=function(e){var t=5===e.numberOfCards,a=e.showResults,r=e.showCustomHand;return t?n.a.createElement("div",{className:"cribbage-options"},n.a.createElement("label",{className:"cribbage-checkbox"},n.a.createElement("input",{type:"checkbox",checked:r,onChange:e.setShowCustomHand}),"Modify your cards"),n.a.createElement("label",{className:"cribbage-checkbox"},n.a.createElement("input",{type:"checkbox",checked:a,onChange:e.setShowResults}),a?"Hide results":"Show results")):null},M=a(14),D=a.n(M),K=function(e){var t=e.cards,a=e.cardsLeft,r=e.showError,c=e.error,s=[];return s=t.length>0?t.map((function(e,t){return 4!==t?n.a.createElement("img",{className:"card",src:e.image,key:e.code,id:e.code,alt:e.code}):n.a.createElement("img",{className:"c-card",src:e.image,key:e.code,id:e.code,alt:e.code})})):n.a.createElement("div",null,n.a.createElement("img",{className:"card",src:D.a,alt:"1"}),n.a.createElement("img",{className:"card",src:D.a,alt:"2"}),n.a.createElement("img",{className:"card",src:D.a,alt:"3"}),n.a.createElement("img",{className:"card",src:D.a,alt:"4"}),n.a.createElement("img",{className:"c-card",src:D.a,alt:"5"})),n.a.createElement("div",{className:"cards-section"},n.a.createElement("div",{style:{display:r?"block":"none"}},n.a.createElement("p",{className:"connection-error"},c)),n.a.createElement("div",null,n.a.createElement("p",{className:"cribbage-text"},"Cards remaining in deck: ",a)),s)},G=[[0,1,2],[0,1,3],[1,2,3],[0,1,4],[0,2,4],[1,2,4],[0,3,4],[1,3,4],[2,3,4],[0,2,3]],I=[[0,1,2,3],[0,1,2,4],[0,1,3,4],[0,2,3,4],[1,2,3,4]];function P(e){return e.map((function(e){return e.value})).map((function(e){return e=isNaN(e)?"ACE"===e?1:10:parseInt(e,10)}))}function q(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=[],r=0;r<e.length;r++)for(var n=r+1;n<e.length;n++)e[r]+e[n]===t&&a.push([r,n]);return a}function F(e,t){for(var a=!0,r=0;r<t.length-1;r++){1!==e[t[r+1]].val-e[t[r]].val&&(a=!1)}return a}function J(e,t){for(var a=0,r=0;r<e.length;r++)e[r]===t&&a++;return a}function B(e){var t=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=P(e),r=q(a,t),n=[],c=0;c<r.length;c++)n.push([e[r[c][0]],e[r[c][1]]]);return n}(e,15),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=P(e),r=t-a[0];a.shift();for(var n=0,c=[],s=n+1;s<a.length+2;s++){for(var o=q(a,r),i=0;i<o.length;i++){var l=[e[s-1]];l.push(e[o[i][0]+s]),l.push(e[o[i][1]+s]),c.push(l)}r=t-a[0],a.shift()}return c}(e,15),r=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=[],r=P(e),n=0;n<r.length;n++){var c=r[0]+r[1]+r[2]+r[3]+r[4]-r[n];if(c===t){var s=Object(x.a)(e);s.splice(n,1),a.push(s)}}return a}(e,15),n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=[],r=P(e),n=r[0]+r[1]+r[2]+r[3]+r[4];n===t&&a.push(e);return a}(e,15);return[].concat(Object(x.a)(t),Object(x.a)(a),Object(x.a)(r),Object(x.a)(n))}function U(e){for(var t=function(e){for(var t=Object(x.a)(e),a=0;a<e.length;a++)switch(t[a].value){case"ACE":t[a].val=1;break;case"JACK":t[a].val=11;break;case"QUEEN":t[a].val=12;break;case"KING":t[a].val=13;break;default:t[a].val=parseInt(t[a].value,10)}return t.sort((function(e,t){return e.val-t.val})),t}(e),a=[],r=!0,n=0;n<4;n++)if(t[n+1].val-t[n].val!==1){r=!1;break}var c=!1;if(!r)for(var s=0;s<I.length;s++)F(t,I[s])&&(a.push([t[I[s][0]],t[I[s][1]],t[I[s][2]],t[I[s][3]]]),c=!0);if(!c&&!r)for(var o=0;o<G.length;o++)F(t,G[o])&&a.push([t[G[o][0]],t[G[o][1]],t[G[o][2]]]);return r?[t]:a}var W=a(35),Q=function(e){function t(e){return Object(C.a)(this,t),Object(y.a)(this,Object(j.a)(t).call(this,e))}return Object(S.a)(t,e),Object(H.a)(t,[{key:"addHighlight",value:function(e){for(var t=e.result?e.result:e,a=0;a<t.length;a++){var r=document.getElementById(t[a].code);r&&(r.style.border="3px solid #77BBFF",r.style["border-radius"]="8px")}}},{key:"removeHighlight",value:function(e){for(var t=e.result?e.result:e,a=0;a<t.length;a++){var r=document.getElementById(t[a].code);r&&(r.style.border=null)}}},{key:"tallyTheScores",value:function(e,t,a,r,n){for(var c=0,s=0;s<e.length;s++)c+=e[s].score;for(var o=0;o<t.length;o++)c+=2;for(var i=0;i<a.length;i++)c+=a[i].length;return r.length>0&&(c+=r.length),n.length>0&&(c+=1),c}},{key:"render",value:function(){var e,t,a,r,c,s,o,i,l,u=this,d=[],h=this.props.cards,m=this.props.showResults,p=Object(x.a)(h),v=0;return 5===p.length&&(s=B(p),i=U(p),d=function(e){for(var t=function(e){var t=[];return e.map((function(e){return t.push(e.value)})),t}(e),a=new Set(t),r=Object(x.a)(a),n=[],c=0;c<r.length;c++){var s=[];if(J(t,r[c])>1){for(var o=0;o<t.length;o++)r[c]===t[o]&&s.push(e[o]);var i={};i.result=s;var l=s.length;2===l?(i.description="Pair",i.score=2):3===l?(i.description="Three of a kind",i.score=6):4===l&&(i.description="Four of a kind",i.score=12),n.push(i)}}return n}(p),o=function(e){var t=Object(x.a)(e),a=function(e){return e.every((function(t){return t.suit===e[0].suit}))},r=a(t);return r?t:(t.pop(),(r=a(t))?t:[])}(p),l=function(e){for(var t=e[4].suit,a=[],r=0;r<e.length-1;r++)"JACK"===e[r].value&&e[r].suit===t&&(a.push(e[r]),a.push(e[4]));return a}(p),v=this.tallyTheScores(d,s,i,o,l)),5===p.length&&(e=n.a.createElement("div",null,d.map((function(e){return n.a.createElement("div",{key:W()},n.a.createElement("section",{className:"cribbage-result",onMouseOver:function(){return u.addHighlight(e)},onMouseOut:function(){return u.removeHighlight(e)}},n.a.createElement("div",{className:"card-result"},e.result.map((function(e){return n.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})}))),n.a.createElement("div",{className:"cribbage-points"},n.a.createElement("span",{className:"cribbage-text"},e.description," - Points: ",e.score))))}))),t=n.a.createElement("div",null,s.map((function(e){return n.a.createElement("div",{key:W()},n.a.createElement("section",{className:"cribbage-result",onMouseOver:function(){return u.addHighlight(e)},onMouseOut:function(){return u.removeHighlight(e)}},n.a.createElement("div",{className:"card-result"},e.map((function(e){return n.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})}))),n.a.createElement("div",{className:"cribbage-points"},n.a.createElement("span",{className:"cribbage-text"},"Sum to 15 - Points: 2"))))}))),a=n.a.createElement("div",null,i.map((function(e){return n.a.createElement("div",{key:W()},n.a.createElement("section",{className:"cribbage-result",onMouseOver:function(){return u.addHighlight(e)},onMouseOut:function(){return u.removeHighlight(e)}},n.a.createElement("div",{className:"card-result"},e.map((function(e){return n.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})}))),n.a.createElement("div",{className:"cribbage-points"},n.a.createElement("span",null,"Run - Points: ",e.length))))}))),l.length>0&&(c=n.a.createElement("div",null,n.a.createElement("section",{className:"cribbage-result",onMouseOver:function(){return u.addHighlight(l)},onMouseOut:function(){return u.removeHighlight(l)}},n.a.createElement("div",{className:"card-result"},l.map((function(e){return n.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})}))),n.a.createElement("div",{className:"cribbage-points"},n.a.createElement("span",{className:"cribbage-text"},"Nibs - Points: 1"))))),r=o.length>0?n.a.createElement("div",null,n.a.createElement("section",{className:"cribbage-result",onMouseOver:function(){return u.addHighlight(o)},onMouseOut:function(){return u.removeHighlight(o)}},n.a.createElement("div",{className:"card-result"},o.map((function(e){return n.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})}))),n.a.createElement("div",{className:"cribbage-points"},n.a.createElement("span",{className:"cribbage-text"},"Flush - Points: ",o.length)))):n.a.createElement("div",null)),5===p.length?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"cribbage-results",style:{display:m?"block":"none"}},n.a.createElement("p",{className:"cribbage-text"},"Score = ",v),t,a,e,r,c)):null}}]),t}(r.Component),z=Object(O.b)((function(e,t){return{showResults:e.deck.showResults}}))(Q),V=function(e){var t=e.buttonText;return n.a.createElement("div",{className:"cribbage-buttons"},n.a.createElement("button",{className:"cribbage-button",onClick:function(){return e.getHand()}},t),n.a.createElement("button",{className:"cribbage-button",onClick:function(){return e.sortHand()}},"Sort cards"))},Y=Object(O.b)((function(e,t){return{showCustomHand:e.deck.showCustomHand}}))((function(e){var t=function(t){t.preventDefault(),e.onCustomHandChange(t.target.name,t.target.value)},a=function(e,a){return n.a.createElement("div",null,n.a.createElement("select",{className:"custom-select",value:a,name:e,onChange:t},n.a.createElement("option",{value:"ACE"},"Ace"),n.a.createElement("option",{value:"2"},"Two"),n.a.createElement("option",{value:"3"},"Three"),n.a.createElement("option",{value:"4"},"Four"),n.a.createElement("option",{value:"5"},"Five"),n.a.createElement("option",{value:"6"},"Six"),n.a.createElement("option",{value:"7"},"Seven"),n.a.createElement("option",{value:"8"},"Eight"),n.a.createElement("option",{value:"9"},"Nine"),n.a.createElement("option",{value:"10"},"Ten"),n.a.createElement("option",{value:"JACK"},"Jack"),n.a.createElement("option",{value:"QUEEN"},"Queen"),n.a.createElement("option",{value:"KING"},"King")))},r=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SPADES";return n.a.createElement("div",{className:"the-suits"},n.a.createElement("select",{className:"custom-select",value:a,name:e,onChange:t},n.a.createElement("option",{value:"HEARTS"},"Hearts"),n.a.createElement("option",{value:"DIAMONDS"},"Diamonds"),n.a.createElement("option",{value:"SPADES"},"Spades"),n.a.createElement("option",{value:"CLUBS"},"Clubs")))};return 5===e.cards.length?n.a.createElement("div",{id:"customize-hand",className:"custom-selects"},n.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.setShowCustomHand(!1)}},n.a.createElement("div",{id:"card-options"},n.a.createElement("div",{className:"card-option"},a("card1",e.cards[0].value),r("suit1",e.cards[0].suit)),n.a.createElement("div",{className:"card-option"},a("card2",e.cards[1].value),r("suit2",e.cards[1].suit)),n.a.createElement("div",{className:"card-option"},a("card3",e.cards[2].value),r("suit3",e.cards[2].suit)),n.a.createElement("div",{className:"card-option"},a("card4",e.cards[3].value),r("suit4",e.cards[3].suit)),n.a.createElement("div",{className:"card-option"},a("card5",e.cards[4].value),r("suit5",e.cards[4].suit))))):null})),X=a(2),Z=a.n(X),$=a(17),ee=a.n($),te=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(y.a)(this,Object(j.a)(t).call(this,e))).codeMap={ACE:"A",2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:0,JACK:"J",QUEEN:"Q",KING:"K"},a.getHand=a.getHand.bind(Object(L.a)(a)),a.sortHand=a.sortHand.bind(Object(L.a)(a)),a.setShowCustomHand=a.setShowCustomHand.bind(Object(L.a)(a)),a.setShowResults=a.setShowResults.bind(Object(L.a)(a)),a.onCustomHandChange=a.onCustomHandChange.bind(Object(L.a)(a)),a}return Object(S.a)(t,e),Object(H.a)(t,[{key:"getHand",value:function(){var e,t=this;this.props.cardsLeft<5?(ee()("New deck","There are not enough cards left in the deck. Now using new deck","info"),e="https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1",fetch(e).then((function(e){if(!e.ok)throw new Error("Network response was not OK");return e.json()})).then((function(a){t.props.dispatch(R(a.deck_id,a.remaining,!1)),e="https://deckofcardsapi.com/api/deck/"+a.deck_id+"/draw/?count=5"})).then((function(){fetch(e).then((function(e){return e.json()})).then((function(e){t.props.dispatch(_(e.cards,e.remaining,!1))}))})).catch((function(e){console.error("A problem occurred fetching the hand: ",e),t.props.dispatch(A(e.message))}))):(e="https://deckofcardsapi.com/api/deck/"+this.props.deck_id+"/draw/?count=5",fetch(e).then((function(e){if(!e.ok)throw new Error("Network response was not OK");return e.json()})).then((function(e){t.props.dispatch(_(e.cards,e.remaining,!1))})).catch((function(e){console.error("A problem occurred fetching the hand: ",e),t.props.dispatch(A(e.message))})))}},{key:"compareCardValues",value:function(e,t){var a=0;return e.val>t.val?a=1:e.val<t.val&&(a=-1),a}},{key:"sortHand",value:function(){var e=Object(x.a)(this.props.hand);e.sort(this.compareCardValues),this.props.dispatch(function(e){return{type:v,data:{sortedHand:e}}}(e))}},{key:"setShowResults",value:function(){this.props.dispatch({type:d})}},{key:"setShowCustomHand",value:function(){this.props.dispatch({type:h});var e=document.getElementById("customize-hand");e&&e.classList.toggle("expanded")}},{key:"alreadyExists",value:function(e,t,a){var r,n=this.props.hand;if("card"===a){var c=n[e].suit;r=this.getCode(t,c)}if("suit"===a){var s=n[e].value;r=this.getCode(s,t)}for(var o=0;o<n.length;o++)if(n[o].code===r)return!0;return!1}},{key:"changeCard",value:function(e,t){e.value=t;var a=this.getCode(t,e.suit);e.code=a;var r="https://deckofcardsapi.com/static/img/".concat(a,".png");return e.image=r,e}},{key:"changeSuit",value:function(e,t){e.suit=t;var a=this.getCode(e.value,t);e.code=a;var r="https://deckofcardsapi.com/static/img/".concat(a,".png");return e.image=r,e}},{key:"getCode",value:function(e,t){return"".concat(this.codeMap[e]).concat(t.charAt(0))}},{key:"onCustomHandChange",value:function(e,t){var a,r=e.charAt(e.length-1)-1,n=Object(x.a)(this.props.hand),c=n[r],s=e.slice(0,4);if("card"===s){if(this.alreadyExists(r,t,s))return void ee()("Oops!","You cannot have two identical cards in a hand.","warning");a=this.changeCard(c,t)}else if("suit"===s){if(this.alreadyExists(r,t,s))return void ee()("Oops","You cannot have two identical cards in a hand.","warning");a=this.changeSuit(c,t)}n[r]=a,this.props.dispatch({type:g,data:{newHand:n}})}},{key:"render",value:function(){var e,t=this.props.cardsLeft,a=this.setShowCustomHand,r=this.props.showCustomHand,c=this.setShowResults,s=this.props.showResults,o=this.onCustomHandChange,i=this.props.showError,l=this.props.error,u=this.props.hand;e=u||[];var d="";return d=52===t?"Let's play":"Get new cards",n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(V,{getHand:this.getHand,sortHand:this.sortHand,buttonText:d}),n.a.createElement("div",{className:"player-hand"},n.a.createElement(K,{getHand:this.getHand,sortHand:this.sortHand,cardsLeft:t,cards:e,showError:i,error:l}),n.a.createElement(Y,{cards:e,onCustomHandChange:o})),n.a.createElement(T,{setShowCustomHand:a,showCustomHand:r,onCustomHandChange:o,numberOfCards:e.length,showResults:s,setShowResults:c}),n.a.createElement(z,{cards:e})))}}]),t}(r.Component);z.propTypes={cards:Z.a.arrayOf(Z.a.shape({suit:Z.a.string.isRequired,value:Z.a.string.isRequired,image:Z.a.string.isRequired,code:Z.a.string.isRequired})).isRequired,card:Z.a.shape({suit:Z.a.string.isRequired,value:Z.a.string.isRequired,image:Z.a.string.isRequired,code:Z.a.string.isRequired})};var ae=Object(O.b)((function(e){return{showResults:e.deck.showResults,showCustomHand:e.deck.showCustomHand,hand:e.deck.hand,cardsLeft:e.deck.cardsLeft,deck_id:e.deck.deck_id,showError:e.deck.showError,error:e.deck.error}}))(te),re=function(e){function t(){return Object(C.a)(this,t),Object(y.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(H.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;fetch("https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1").then((function(e){if(!e.ok)throw new Error("Network response was not OK");return e.json()})).then((function(t){e.props.dispatch(R(t.deck_id,t.remaining,!1))})).catch((function(t){console.error("A problem occurred fetching the hand: ",t),e.props.dispatch(A(t.message))}))}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:"cribbage-header"},n.a.createElement("h1",{className:"cribbage-text"},"Cribbage Hand Practice Tool"),n.a.createElement("p",{className:"cribbage-text"},"Practice your point counting skills."),n.a.createElement("div",{className:"icon"})),n.a.createElement("div",{className:"app"},n.a.createElement(ae,null)))}}]),t}(r.Component),ne=Object(O.b)((function(e){return{hand:e.deck.hand,cardsLeft:e.deck.cardsLeft,deck_id:e.deck.deck_id,showError:e.deck.showError,error:e.deck.error}}))(re);a(42);s.a.render(n.a.createElement(O.a,{store:N},n.a.createElement(ne,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.454543bc.chunk.js.map