(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(41)},38:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),o=a(6),i=a(21),l=a(22),u=a(5),d={TOGGLE_SHOW_RESULTS:"TOGGLE_SHOW_RESULTS",TOGGLE_SHOW_CUSTOM_HAND:"TOGGLE_SHOW_CUSTOM_HAND",GET_NEW_CARDS:"GET_NEW_CARDS",GET_NEW_DECK:"GET_NEW_DECK",SORT_HAND:"SORT_HAND",CHANGE_HAND:"CHANGE_HAND",SHOW_ERROR:"SHOW_ERROR"},h={showResults:!1,showCustomHand:!1,showError:!1,error:"",hand:[],cardsLeft:0};var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.TOGGLE_SHOW_RESULTS:return Object(u.a)({},e,{showResults:!e.showResults});case d.TOGGLE_SHOW_CUSTOM_HAND:return Object(u.a)({},e,{showCustomHand:!e.showCustomHand});case d.GET_NEW_DECK:return Object(u.a)({},e,{deck_id:t.data.deck_id,cardsLeft:t.data.cardsLeft,showResults:t.data.showResults,showError:!1,error:""});case d.GET_NEW_CARDS:return Object(u.a)({},e,{hand:t.data.hand,cardsLeft:t.data.cardsLeft,showResults:t.data.showResults,showError:!1,error:""});case d.SORT_HAND:return Object(u.a)({},e,{hand:t.data.sortedHand});case d.CHANGE_HAND:return Object(u.a)({},e,{hand:t.data.newHand});case d.SHOW_ERROR:return Object(u.a)({},e,{showError:!0,error:t.data.error});default:return e}},p=Object(o.c)({deck:m}),v=Object(i.createLogger)({collapsed:!0}),E=Object(o.d)(p,Object(o.a)(l.a,v)),g=a(4),f=a(1),b=a(10),k=a(11),N=a(14),O=a(12),w=a(13),H=a(2);function C(e,t,a){return{type:d.GET_NEW_DECK,data:{deck_id:e,cardsLeft:t,showResults:a}}}function S(e,t,a){return{type:d.GET_NEW_CARDS,data:{hand:e,cardsLeft:t,showResults:a}}}function _(e){return{type:d.SHOW_ERROR,data:{error:e}}}var y=a(15),j=a.n(y),R=function(e){var t=e.cards,a=e.buttonText,n=e.cardsLeft,c=e.showError,s=e.error,o=[];return o=t.length>0?t.map(function(e,t){return 4!==t?r.a.createElement("img",{className:"card",src:e.image,key:e.code,id:e.code,alt:e.code}):r.a.createElement("img",{className:"c-card",src:e.image,key:e.code,id:e.code,alt:e.code})}):r.a.createElement("div",{className:"cribbage-section"},r.a.createElement("img",{className:"card",src:"./card_back.jpg",alt:"1"}),r.a.createElement("img",{className:"card",src:"./card_back.jpg",alt:"2"}),r.a.createElement("img",{className:"card",src:"./card_back.jpg",alt:"3"}),r.a.createElement("img",{className:"card",src:"./card_back.jpg",alt:"4"}),r.a.createElement("img",{className:"c-card",src:"./card_back.jpg",alt:"5"})),r.a.createElement("div",{className:"cribbage-parent"},r.a.createElement("header",{className:"cribbage-header"},r.a.createElement("button",{className:"cribbage-button",onClick:function(){return e.getHand()}},a),r.a.createElement("button",{className:"cribbage-button",onClick:function(){return e.sortHand()}},"Sort cards")),r.a.createElement("div",{style:{display:c?"block":"none"}},r.a.createElement("p",{className:"connection-error"},s)),r.a.createElement("div",null,r.a.createElement("p",{className:"cribbage-text"},"Cards remaining in deck: ",n)),r.a.createElement("section",null,r.a.createElement("div",null,o)))},T=[[0,1,2],[0,1,3],[1,2,3],[0,1,4],[0,2,4],[1,2,4],[0,3,4],[1,3,4],[2,3,4],[0,2,3]],A=[[0,1,2,3],[0,1,2,4],[0,1,3,4],[0,2,3,4],[1,2,3,4]];function G(e){return e.map(function(e){return e.value}).map(function(e){return e=isNaN(e)?"ACE"===e?1:10:parseInt(e,10)})}function D(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=[],n=0;n<e.length;n++)for(var r=n+1;r<e.length;r++)e[n]+e[r]===t&&a.push([n,r]);return a}function L(e,t){for(var a=!0,n=0;n<t.length-1;n++){1!==e[t[n+1]].val-e[t[n]].val&&(a=!1)}return a}function x(e,t){for(var a=0,n=0;n<e.length;n++)e[n]===t&&a++;return a}function W(e){var t=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=D(G(e),t),n=[],r=0;r<a.length;r++)n.push([e[a[r][0]],e[a[r][1]]]);return n}(e,15),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=G(e),n=t-a[0];a.shift();for(var r=[],c=1;c<a.length+2;c++){for(var s=D(a,n),o=0;o<s.length;o++){var i=[e[c-1]];i.push(e[s[o][0]+c]),i.push(e[s[o][1]+c]),r.push(i)}n=t-a[0],a.shift()}return r}(e,15),n=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=[],n=G(e),r=0;r<n.length;r++){var c=n[0]+n[1]+n[2]+n[3]+n[4]-n[r];if(c===t){var s=Object(f.a)(e);s.splice(r,1),a.push(s)}}return a}(e,15),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=[],n=G(e);n[0]+n[1]+n[2]+n[3]+n[4]===t&&a.push(e);return a}(e,15);return[].concat(Object(f.a)(t),Object(f.a)(a),Object(f.a)(n),Object(f.a)(r))}function M(e){for(var t=function(e){for(var t=Object(f.a)(e),a=0;a<e.length;a++)switch(t[a].value){case"ACE":t[a].val=1;break;case"JACK":t[a].val=11;break;case"QUEEN":t[a].val=12;break;case"KING":t[a].val=13;break;default:t[a].val=parseInt(t[a].value,10)}return t.sort(function(e,t){return e.val-t.val}),t}(e),a=[],n=!0,r=0;r<4;r++)if(t[r+1].val-t[r].val!==1){n=!1;break}var c=!1;if(!n)for(var s=0;s<A.length;s++)L(t,A[s])&&(a.push([t[A[s][0]],t[A[s][1]],t[A[s][2]],t[A[s][3]]]),c=!0);if(!c&&!n)for(var o=0;o<T.length;o++)L(t,T[o])&&a.push([t[T[o][0]],t[T[o][1]],t[T[o][2]]]);return n?[t]:a}var K=a(35),U=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(N.a)(this,Object(O.a)(t).call(this,e))).patternsOfThree=[[0,1,2],[0,1,3],[1,2,3],[0,1,4],[0,2,4],[1,2,4],[0,3,4],[1,3,4],[2,3,4],[0,2,3]],a}return Object(w.a)(t,e),Object(k.a)(t,[{key:"addHighlight",value:function(e){for(var t=e.result?e.result:e,a=0;a<t.length;a++){var n=document.getElementById(t[a].code);n&&(n.style.border="3px solid #99FFFF",n.style["border-radius"]="8px")}}},{key:"removeHighlight",value:function(e){for(var t=e.result?e.result:e,a=0;a<t.length;a++){var n=document.getElementById(t[a].code);n&&(n.style.border=null)}}},{key:"tallyTheScores",value:function(e,t,a,n,r){for(var c=0,s=0;s<e.length;s++)c+=e[s].score;for(var o=0;o<t.length;o++)c+=2;for(var i=0;i<a.length;i++)c+=a[i].length;return n.length>0&&(c+=n.length),r.length>0&&(c+=1),c}},{key:"render",value:function(){var e,t,a,n,c,s,o,i,l,u=this,d=[],h=this.props.cards,m=this.props.showResults,p=Object(f.a)(h),v=0;5===p.length&&(s=W(p),i=M(p),d=function(e){for(var t=function(e){var t=[];return e.map(function(e){return t.push(e.value)}),t}(e),a=new Set(t),n=Object(f.a)(a),r=[],c=0;c<n.length;c++){var s=[];if(x(t,n[c])>1){for(var o=0;o<t.length;o++)n[c]===t[o]&&s.push(e[o]);var i={};i.result=s;var l=s.length;2===l?(i.description="Pair",i.score=2):3===l?(i.description="Three of a kind",i.score=6):4===l&&(i.description="Four of a kind",i.score=12),r.push(i)}}return r}(p),o=function(e){var t=Object(f.a)(e),a=function(e){return e.every(function(t){return t.suit===e[0].suit})},n=a(t);return n?t:(t.pop(),(n=a(t))?t:[])}(p),l=function(e){for(var t=e[4].suit,a=[],n=0;n<e.length-1;n++)"JACK"===e[n].value&&e[n].suit===t&&(a.push(e[n]),a.push(e[4]));return a}(h),v=this.tallyTheScores(d,s,i,o,l));var E=r.a.createElement("div",{className:"show-results"},r.a.createElement("label",{className:"cribbage-checkbox"},r.a.createElement("input",{type:"checkbox",inline:"true",checked:m,onChange:this.props.setShowResults}),m?"Hide results":"Show results"));return 5===p.length&&(e=r.a.createElement("div",null,d.map(function(e){return r.a.createElement("div",{key:K()},r.a.createElement("section",{className:"cribbage-results",onMouseOver:function(){return u.addHighlight(e)},onMouseOut:function(){return u.removeHighlight(e)}},r.a.createElement("div",{className:"card-result"},e.result.map(function(e){return r.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})})),r.a.createElement("div",{className:"cribbage-points"},r.a.createElement("span",{className:"cribbage-text"},e.description," - Points: ",e.score))))})),t=r.a.createElement("div",null,s.map(function(e){return r.a.createElement("div",{key:K()},r.a.createElement("section",{className:"cribbage-results",onMouseOver:function(){return u.addHighlight(e)},onMouseOut:function(){return u.removeHighlight(e)}},r.a.createElement("div",{className:"card-result"},e.map(function(e){return r.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})})),r.a.createElement("div",{className:"cribbage-points"},r.a.createElement("span",{className:"cribbage-text"},"Sum to 15 - Points: 2"))))})),a=r.a.createElement("div",null,i.map(function(e){return r.a.createElement("div",{key:K()},r.a.createElement("section",{className:"cribbage-results",onMouseOver:function(){return u.addHighlight(e)},onMouseOut:function(){return u.removeHighlight(e)}},r.a.createElement("div",{className:"card-result"},e.map(function(e){return r.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})})),r.a.createElement("div",{className:"cribbage-points"},r.a.createElement("span",null,"Run - Points: ",e.length))))})),l.length>0&&(c=r.a.createElement("div",null,r.a.createElement("section",{className:"cribbage-results",onMouseOver:function(){return u.addHighlight(l)},onMouseOut:function(){return u.removeHighlight(l)}},r.a.createElement("div",{className:"card-result"},l.map(function(e){return r.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})})),r.a.createElement("div",{className:"cribbage-points"},r.a.createElement("span",{className:"cribbage-text"},"Nibs - Points: 1"))))),n=o.length>0?r.a.createElement("div",null,r.a.createElement("section",{className:"cribbage-results",onMouseOver:function(){return u.addHighlight(o)},onMouseOut:function(){return u.removeHighlight(o)}},r.a.createElement("div",{className:"card-result"},o.map(function(e){return r.a.createElement("img",{className:"result-card",src:e.image,key:e.code,alt:e.code})})),r.a.createElement("div",{className:"cribbage-points"},r.a.createElement("span",{className:"cribbage-text"},"Flush - Points: ",o.length)))):r.a.createElement("div",null)),5===p.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,E),r.a.createElement("div",{style:{display:m?"block":"none"}},r.a.createElement("p",{className:"cribbage-text"},"Score = ",v),t,a,e,n,c)):r.a.createElement("div",null,E)}}]),t}(n.Component),F=Object(g.b)(function(e,t){return{showResults:e.deck.showResults,showCustomHand:e.deck.showCustomHand}})(U),P=Object(g.b)(function(e,t){return{showResults:e.deck.showResults,showCustomHand:e.deck.showCustomHand}})(function(e){var t=function(t){t.preventDefault(),e.onCustomHandChange(t.target.name,t.target.value)},a=function(e,a){return r.a.createElement("div",null,r.a.createElement("select",{className:"custom-select",value:a,name:e,onChange:t},r.a.createElement("option",{value:"ACE"},"Ace"),r.a.createElement("option",{value:"2"},"Two"),r.a.createElement("option",{value:"3"},"Three"),r.a.createElement("option",{value:"4"},"Four"),r.a.createElement("option",{value:"5"},"Five"),r.a.createElement("option",{value:"6"},"Six"),r.a.createElement("option",{value:"7"},"Seven"),r.a.createElement("option",{value:"8"},"Eight"),r.a.createElement("option",{value:"9"},"Nine"),r.a.createElement("option",{value:"10"},"Ten"),r.a.createElement("option",{value:"JACK"},"Jack"),r.a.createElement("option",{value:"QUEEN"},"Queen"),r.a.createElement("option",{value:"KING"},"King")))},n=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SPADES";return r.a.createElement("div",{className:"the-suits"},r.a.createElement("select",{className:"custom-select",value:a,name:e,onChange:t},r.a.createElement("option",{value:"HEARTS"},"Hearts"),r.a.createElement("option",{value:"DIAMONDS"},"Diamonds"),r.a.createElement("option",{value:"SPADES"},"Spades"),r.a.createElement("option",{value:"CLUBS"},"Clubs")))},c=r.a.createElement("div",{className:"show-results"},r.a.createElement("label",{className:"cribbage-checkbox"}," ",r.a.createElement("input",{type:"checkbox",inline:"true",checked:e.showCustomHand,onChange:e.setShowCustomHand}),"Modify your cards"));return 5===e.cards.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,c),r.a.createElement("div",{style:{display:e.showCustomHand?"block":"none"}},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.setShowCustomHand(!1)}},r.a.createElement("div",{id:"card-options"},r.a.createElement("div",{className:"card-option"},a("card1",e.cards[0].value),n("suit1",e.cards[0].suit)),r.a.createElement("div",{className:"card-option"},a("card2",e.cards[1].value),n("suit2",e.cards[1].suit)),r.a.createElement("div",{className:"card-option"},a("card3",e.cards[2].value),n("suit3",e.cards[2].suit)),r.a.createElement("div",{className:"card-option"},a("card4",e.cards[3].value),n("suit4",e.cards[3].suit)),r.a.createElement("div",{className:"card-option"},a("card5",e.cards[4].value),n("suit5",e.cards[4].suit)))))):null}),I=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(N.a)(this,Object(O.a)(t).call(this,e))).codeMap={ACE:"A",2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:0,JACK:"J",QUEEN:"Q",KING:"K"},a.getHand=a.getHand.bind(Object(H.a)(Object(H.a)(a))),a.sortHand=a.sortHand.bind(Object(H.a)(Object(H.a)(a))),a.setShowCustomHand=a.setShowCustomHand.bind(Object(H.a)(Object(H.a)(a))),a.setShowResults=a.setShowResults.bind(Object(H.a)(Object(H.a)(a))),a.onCustomHandChange=a.onCustomHandChange.bind(Object(H.a)(Object(H.a)(a))),a}return Object(w.a)(t,e),Object(k.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;fetch("https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1").then(function(e){if(!e.ok)throw new Error("Network response was not OK");return e.json()}).then(function(t){e.props.dispatch(C(t.deck_id,t.remaining,!1))}).catch(function(t){console.error("A problem occurred fetching the hand: ",t),e.props.dispatch(_(t.message))})}},{key:"getHand",value:function(){var e,t=this;this.props.cardsLeft<5?(j()("New deck","There are not enough cards left in the deck. Now using new deck","info"),e="https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1",fetch(e).then(function(e){if(!e.ok)throw new Error("Network response was not OK");return e.json()}).then(function(a){t.props.dispatch(C(a.deck_id,a.remaining,!1)),e="https://deckofcardsapi.com/api/deck/"+a.deck_id+"/draw/?count=5"}).then(function(){fetch(e).then(function(e){return e.json()}).then(function(e){t.props.dispatch(S(e.cards,e.remaining,!1))})}).catch(function(e){console.error("A problem occurred fetching the hand: ",e),t.props.dispatch(_(e.message))})):(e="https://deckofcardsapi.com/api/deck/"+this.props.deck_id+"/draw/?count=5",fetch(e).then(function(e){if(!e.ok)throw new Error("Network response was not OK");return e.json()}).then(function(e){t.props.dispatch(S(e.cards,e.remaining,!1))}).catch(function(e){console.error("A problem occurred fetching the hand: ",e),t.props.dispatch(_(e.message))}))}},{key:"compareCardValues",value:function(e,t){var a=0;return e.val>t.val?a=1:e.val<t.val&&(a=-1),a}},{key:"sortHand",value:function(){var e=Object(f.a)(this.props.hand);e.sort(this.compareCardValues),this.props.dispatch(function(e){return{type:d.SORT_HAND,data:{sortedHand:e}}}(e))}},{key:"setShowCustomHand",value:function(){this.props.dispatch({type:d.TOGGLE_SHOW_CUSTOM_HAND})}},{key:"setShowResults",value:function(){this.props.dispatch({type:d.TOGGLE_SHOW_RESULTS})}},{key:"getCode",value:function(e,t){return"".concat(this.codeMap[e]).concat(t.charAt(0))}},{key:"alreadyExists",value:function(e,t,a){var n,r=this.props.hand;if("card"===a){var c=r[e].suit;n=this.getCode(t,c)}if("suit"===a){var s=r[e].value;n=this.getCode(s,t)}for(var o=0;o<r.length;o++)if(r[o].code===n)return!0;return!1}},{key:"changeCard",value:function(e,t){e.value=t;var a=this.getCode(t,e.suit);e.code=a;var n="https://deckofcardsapi.com/static/img/".concat(a,".png");return e.image=n,e}},{key:"changeSuit",value:function(e,t){e.suit=t;var a=this.getCode(e.value,t);e.code=a;var n="https://deckofcardsapi.com/static/img/".concat(a,".png");return e.image=n,e}},{key:"onCustomHandChange",value:function(e,t){var a,n,r=e.charAt(e.length-1)-1,c=Object(f.a)(this.props.hand),s=c[r],o=e.slice(0,4);if("card"===o){if(this.alreadyExists(r,t,o))return void j()("Oops!","You cannot have two identical cards in a hand.","warning");a=this.changeCard(s,t)}else if("suit"===o){if(this.alreadyExists(r,t,o))return void j()("Oops","You cannot have two identical cards in a hand.","warning");a=this.changeSuit(s,t)}c[r]=a,this.props.dispatch((n=c,{type:d.CHANGE_HAND,data:{newHand:n}}))}},{key:"render",value:function(){var e,t=this.props.cardsLeft,a=this.setShowCustomHand,n=this.setShowResults,c=this.onCustomHandChange,s=this.props.showError,o=this.props.error,i=this.props.hand;e=i||[];var l="";return l=52===t?"Let's play":"Get new cards",r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"cribbage-text"},"Cribbage Hand Practice Tool"),r.a.createElement("p",{className:"cribbage-text"},"Practice your point counting skills."),r.a.createElement("div",{className:"result-row"},r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{getHand:this.getHand,sortHand:this.sortHand,cardsLeft:t,cards:e,buttonText:l,showError:s,error:o}))),r.a.createElement(P,{cards:e,setShowCustomHand:a,onCustomHandChange:c}),r.a.createElement(F,{cards:e,setShowResults:n}))}}]),t}(n.Component),J=Object(g.b)(function(e,t){return{showResults:e.deck.showResults,showCustomHand:e.deck.showCustomHand,hand:e.deck.hand,cardsLeft:e.deck.cardsLeft,deck_id:e.deck.deck_id,showError:e.deck.showError,error:e.deck.error}})(I);a(38);s.a.render(r.a.createElement(g.a,{store:E},r.a.createElement(J,null)),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.e390d5d1.chunk.js.map